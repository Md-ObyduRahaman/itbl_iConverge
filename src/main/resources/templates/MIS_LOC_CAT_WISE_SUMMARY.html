<!DOCTYPE html>
<html lang="en" xmlns:th="www.thymeleaf.org">
   <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="description"
         content="Responsive sidebar template with sliding effect and dropdown menu based on bootstrap 3">
      <title>iConverge</title>
      <!-- using online links -->
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css"
         integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
      <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"
         integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
      <link rel="stylesheet" href="//malihu.github.io/custom-scrollbar/jquery.mCustomScrollbar.min.css">
      <!-- CSS only -->
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet"
         integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
      <!-- CSS only -->
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet"
         integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
      <!-- using local links -->
      <!-- <link rel="stylesheet" href="../node_modules/bootstrap/dist/css/bootstrap.min.css">
         <link rel="stylesheet" href="../node_modules/@fortawesome/fontawesome-free/css/all.min.css">
         <link rel="stylesheet" href="../node_modules/malihu-custom-scrollbar-plugin/jquery.mCustomScrollbar.css"> -->
      <link rel="stylesheet" href="../../css/main.css">
      <link rel="stylesheet" href="../../css/sidebar-themes.css">
      <link rel="stylesheet" href="../../css/form-style.css">
      <style type="text/css">
         /* table border  */
         table,
         tr,
         th,
         td {
         border: 1px solid black;
         }
         .table {
         width: 100%;
         border: 2px solid black;
         border-collapse: collapse;
         }
         /* index description center   */
         .center {
         margin-left: 62vh;
         display: inline;
         }
      </style>
   </head>
   <body>
      <div class="page-wrapper default-theme  bg1 toggled">
         <span th:remove="tag" th:utext="${dataHtml}"></span>
         <!-- page-content  -->
         <main class="page-content" style="overflow: auto;">
            <div id="overlay" class="overlay"></div>
            <div class="container-fluid" style="padding: 0px; ">
               <div class="title-bar"
                  style="height: 90px; background-image: url(../img/bn.jpeg) !important;background-repeat: no-repeat;width: 100%;height: 100%;background-size: cover;">
                  <a id="toggle-sidebar" class="btn btn-secondary rounded-0" href="#"
                     style="margin: 20px; background: #3ab54a;">
                     <span>
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                           class="bi bi-list" viewBox="0 0 16 16">
                           <path fill-rule="evenodd"
                              d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z" />
                        </svg>
                     </span>
                  </a>
               </div>
               <!-- heading start-->
               <div class="container mt-3 mb-5 card">
                  <form th:action="@{/MIS_LOC_CAT_WISE_SUMMARY}" method="post"
                     th:object="${mIS_FORM}">
                     <div class="row pt-4 pb-4 card-body">
                        
                        <div class="col-lg-4 col-md-4 col-sm-12">
                           <div class="row">
                              <div class="col-lg-3 col-md-3 col-sm-12">
                                 <label for="text" class="text-center m-2">Zone:</label>
                              </div>
                              <div class="col-lg-9 col-md-9 col-sm-12">
                                 <select id="zone" class="form-control" name="zone">
                                    <option value="">Select Zone</option>
                                    <option th:each="z : ${listIC_ZONE_MST}"
                                       th:value="${z.ZONE_CODE}" th:text="${z.ZONE_NAME}"
                                        th:selected="${z.ZONE_CODE}==${zone}"></option> 
                                 </select>
                              </div>
                           </div>
                        </div>
                        <div class="col-lg-4 col-md-4 col-sm-12">
                           <div class="row">
                              <div class="col-lg-3 col-md-3 col-sm-12">
                                 <label for="text" class="text-center m-2">Circle:</label>
                              </div>
                              <div class="col-lg-9 col-md-9 col-sm-12">
                                 <select id="circle" class="form-control" name="circle">
                                    <option value="">Select Circle</option>
                                    <option th:each="circle : ${circleList}"
                                       th:value="${circle.CIRCLE_CODE}"
                                       th:text="${circle.CIRCLE_NAME}"
                                       th:selected="${circle.CIRCLE_CODE}==${circle}"></option>  
                                 </select>
                              </div>
                           </div>
                        </div> 
						<div class="col-lg-4 col-md-4 col-sm-12">
                              <div class="row">
                                 <div class="col-lg-3 col-md-3 col-sm-12">
                                    <label for="text" class="text-center m-2">Loc/Esu:</label>
                                 </div>
                                 <div class="col-lg-9 col-md-9 col-sm-12">
                                    <select id="loc" class="form-control" name="loc">
                                       <option value="">Select Location</option>
                                       <option th:each="l : ${locList}"
                                          th:value="${l.LOCATION_CODE}"
                                          th:text="${l.LOCATION_NAME}"
                                          th:selected="${l.LOCATION_CODE}==${loc}"></option>
                                    </select>
                                 </div>
                              </div>
                           </div>
                     </div>
                     <div class="row">
                     	<div class="col-lg-4 col-md-4 col-sm-12">
                           <div class="row ml-2">
                              <div class="col-lg-3 col-md-3 col-sm-12">
                                 <label for="bill" class="">Month :</label>
                              </div>
                              <div class="col-lg-9 col-md-9 col-sm-12">
                                 <select id="month" class="form-control" name="month">
                                    <option value="">Select Month</option>
                                    <option th:each="b : ${billList}"
                                       th:value="${b.BILL_CYCLE_CODE}"
                                       th:text="${b.BILL_CYCLE_DESC}"
                                       th:selected="${b.BILL_CYCLE_CODE}==${month}"></option>
                                 </select>
                              </div>
                           </div>
                        </div>
                        
                        <div class="col-lg-1 col-md-2 col-sm-12 text-center">
                        <input type="submit" value="Load"
                           class="btn btn-lg btn-success mr-1 mb-1" />
                     </div>
                     <div class="col-lg-1 col-md-2 col-sm-12 text-center">
                        <input type="button"
                           class="btn btn-lg btn-danger mr-1 mb-1"
                           id="printme" value="Print" onclick="printContent('divName')" />
                     </div>
                     </div>
                     
               </form>
            </div>
            <div id="divName">
               <div class="container">
                  <div class="row">
                     <div class="col-sm" style="text-align: center;">
                        <h6><b>BANGLADESH POWER DEVELOPMENT BOARD</b></h6>
                        <h6><b>Category Wise Sale of Energy Upto <span th:text="${mon}"></span></b></h6>
                        <h5 class="text-center mt-4">S&D/ESU : <span th:text="${loc}"></span></h5>
                     </div>
                  </div>
               </div>
               <div class="container">
                  <div class="row">
                     <div class="col-sm" style="text-align: right;">
                        <h6><b>Figures in MKWh.</b></h6>
                     </div>
                  </div>
               </div>
               <div class="container">
                  <!-- lower table part -->
                  <table class="table mt-4" style="text-align: center;">
                     <tr style="background-color:#ECD8FD">
                        <th>Zone Name</th>
                        <th>Circle Name</th>
                        <th>Location Name</th>
                        <th>No. Of Active Cons.</th>
                        <th>Import(MKWH)</th>
                        <th>Sale(MKWH)</th>
                        <th>Distributed System Loss</th>
                        <th>Net Bill</th>
                        <th>Net Collection</th>
                        <th>CB Ratio</th>
                        <th>CI Ratio</th>
                        <th>Bill Rate</th>
                        <th>Rec. Amount</th>
                        <th>Equivalent Month</th>
                     </tr>
                     <tr th:each="t: ${listMIS_LOC_CAT_WISE_SUMMARY}">
                        <th scope="row" th:text="${t.ZONE_NAME}"></th>
                        <td scope="row" th:text="${t.CIRCLE_NAME}"></td>
                        <td scope="row" th:text="${t.LOCATION_NAME}"></td>
                        <td scope="row" th:text="${t.NO_OF_ACTIVE_CONS}"></td>
                        <td scope="row" th:text="${t.IMPORT_MKWH}"></td>
                        <td scope="row" th:text="${t.SALE_MKWH}"></td>
                        <td scope="row" th:text="${t.DIST_SYS_LOSS}"></td>
                        <td scope="row" th:text="${t.NET_BILL_MTK}"></td>
                        <td scope="row" th:text="${t.NET_COLL_MTK}"></td>
                        <td scope="row" th:text="${t.CB_RATIO}"></td>
                        <td scope="row" th:text="${t.CI_RATIO}"></td>
                        <td scope="row" th:text="${t.BILL_RATE}"></td>
                        <td scope="row" th:text="${t.REC_AMT}"></td>
                        <td scope="row" th:text="${t.EQM}"></td>
                     </tr>
                  </table>
               </div>
            </div>
      </div>
      </main>
      <!-- page-content" -->
      </div>
      <!-- page-wrapper -->
      <!-- using online scripts -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"
         integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"
         integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
      <script src="//malihu.github.io/custom-scrollbar/jquery.mCustomScrollbar.concat.min.js"></script>
      <!-- using local scripts -->
      <!-- <script src="../node_modules/jquery/dist/jquery.min.js"></script>
         <script src="../node_modules/popper.js/dist/umd/popper.min.js"></script>
         <script src="../node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
         <script src="../node_modules/malihu-custom-scrollbar-plugin/jquery.mCustomScrollbar.concat.min.js"></script> -->
      <script src="../../js/main.js"></script>
      <!-- 		circle dropdown starts  -->
      <script>
         $(document).ready(function(){
         	$("#zone").change(function(){
         		
         		$("#circle").empty();
         		
         		
         		
         		var x = $("#zone").val();
         		
         		if(x == ""){
         			$("#circle").empty();
         			$("<option>").val("").text("Select Circle").appendTo(circleDropdown);
         		}
         		else{
         		
         			var urlString = "/api/circle/"+x;
         			console.log(urlString);
         			
         			$.ajax({
         				method: "GET",
         				url : urlString
         			})
         			.done(function(responseJson){
         				
         				circleDropdown = $("#circle");
         				
         				$("<option>").val("").text("Select Circle").appendTo(circleDropdown);
         				$.each(responseJson, function(index, circle){
         					
         					$("<option>").val(circle.circle_CODE).text(circle.circle_NAME).appendTo(circleDropdown);
         				});
         			})
         			.fail(function(){
         				alert("Connection Error");
         			})
         		}
         		
         		
         	})
         })
      </script>
      <!-- 		circle dropdown ends  -->
      
      <!-- loc dropdown starts -->
      <script>
	      $(document).ready(function(){
	       	$("#circle").change(function(){
	       		
	       		$("#loc").empty();
	       		
	       		
	       		
	       		var x = $("#circle").val();
	       		
	       		if(x == ""){
	       			$("#loc").empty();
	       			$("<option>").val("").text("Select location").appendTo(locDropdown);
	       		}
	       		else{
	       		
	       			var urlString = "/api/loc/"+x;
	       			console.log(urlString);
	       			
	       			$.ajax({
	       				method: "GET",
	       				url : urlString
	       			})
	       			.done(function(responseJson){
	       				
	       				locDropdown = $("#loc");
	       				
	       				$("<option>").val("").text("Select location").appendTo(locDropdown);
	       				$.each(responseJson, function(index, loc){
	       					
	       					$("<option>").val(loc.location_CODE).text(loc.location_NAME).appendTo(locDropdown);
	       				});
	       			})
	       			.fail(function(){
	       				alert("Connection Error");
	       			})
	       		}
	       		
	       		
	       	})
	       })
      </script>
      
      <!-- loc dropdown ends -->
      
   </body>
</html>