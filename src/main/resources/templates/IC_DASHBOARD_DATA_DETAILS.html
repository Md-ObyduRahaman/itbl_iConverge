<!DOCTYPE html>
<html lang="en" xmlns:th="www.thymeleaf.org">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description"
	content="Responsive sidebar template with sliding effect and dropdown menu based on bootstrap 3">
<title>iConverge</title>

<!-- using online links -->
<link rel="stylesheet"
	href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css"
	integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS"
	crossorigin="anonymous">
<link rel="stylesheet"
	href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"
	integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay"
	crossorigin="anonymous">
<link rel="stylesheet"
	href="//malihu.github.io/custom-scrollbar/jquery.mCustomScrollbar.min.css">
<!-- CSS only -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We"
	crossorigin="anonymous">
<!-- CSS only -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We"
	crossorigin="anonymous">

<!-- using local links -->
<!-- <link rel="stylesheet" href="../node_modules/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../node_modules/@fortawesome/fontawesome-free/css/all.min.css">
    <link rel="stylesheet" href="../node_modules/malihu-custom-scrollbar-plugin/jquery.mCustomScrollbar.css"> -->

<link rel="stylesheet" href="../../css/main.css">
<link rel="stylesheet" href="../../css/sidebar-themes.css">
<link rel="stylesheet" href="../../css/form-style.css">

<!-- datatable link  -->
<link
	href="https://cdn.datatables.net/1.10.25/css/jquery.dataTables.min.css"
	rel="stylesheet" />
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<script type="text/javascript"
	src="https://www.gstatic.com/charts/loader.js"></script>
<!-- print div scripts starts -->

<script type="text/javascript">




function printDiv() 
{

//var user = document.getElementById("user").innerText;


var r = document.getElementById("report");
var r_text = r.options[r.selectedIndex].text;


var z = document.getElementById("zone");
var z_text = z.options[z.selectedIndex].text;
if(z_text === "Select Zone"){
	z_text = "  ";
}


var c = document.getElementById("circle");
var c_text = c.options[c.selectedIndex].text;
if(c_text === "Select Circle"){
	c_text = "  ";
}


var d = document.getElementById("div");
var d_text = d.options[d.selectedIndex].text;
if(d_text === "Select Div"){
	d_text = "  ";
}


var l = document.getElementById("loc");
var l_text = l.options[l.selectedIndex].text;
if(l_text === "Select Loc"){
	l_text = "  ";
}



  var divToPrint=document.getElementById('DivIdToPrint');

  var newWin=window.open('','Print-Window');

  newWin.document.open();

  newWin.document.write('<html> <link rel="stylesheet"href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"crossorigin="anonymous">');
  newWin.document.write('<style> *{font-size: 16px;} .fig1{  height: 60%!important} .dt-button{display:none!important;} #table1{border: 1px solid black; width: 80%!important; height: 70%!important;} </style>'); 
  newWin.document.write('<body onload="window.print()"> <div class="float-right" style="font-size: 18px">User : ITBL</div> <div class="text-center"> <img style="margin-left: 150px" src="./img/logo.jpg" alt="" height="80px" width="80px"> <h1 style="font-size:22px;">Bangladesh Power Development Board</h1> </div>');
  //newWin.document.write('<body onload="window.print()"> <div class="float-right" style="font-size: 18px">User : '+ user +'</div> <div class="text-center"> <img style="margin-left: 150px" src="./image/Logo.png" alt="" height="80px" width="80px"> <h1 style="font-size:22px;">Bangladesh Power Development Board</h1> </div>');
//   newWin.document.write('<div style="text-align:center; font-size: 20px;">SAIDI: System Average Interruption Duration Index</div>');
//   newWin.document.write('<div style="text-align:center; font-size: 20px;">SAIFI: System Average Interruption Frequency Index</div>');
newWin.document.write('<div style="text-align:center; font-size: 20px;">Distribution Performance Report</div>');
  newWin.document.write('<div style="text-align:center; font-size: 20px;">Report Level :' + r_text + '</div>');
  
  newWin.document.write('<div style="text-align:center; font-size: 20px;">Zone :' + z_text +  ' Circle : '+ c_text +' Div : '+ d_text +' Loc/Esu : ' + l_text +'</div>');
  
  
  
  
  
  newWin.document.write(divToPrint.innerHTML);
  
  newWin.document.write('</body></html>');

  newWin.document.close();

  setTimeout(function(){newWin.close();},10);

}









</script>
<!-- print div script ends -->
<style>
fieldset {
	overflow: hidden
}

.some-class {
	float: left;
	clear: none;
}

label {
	float: left;
	clear: none;
	display: block;
	padding: 0px 1em 0px 8px;
}

input[type=radio], input.radio {
	float: left;
	clear: none;
	margin: 2px 0 0 2px;
}
</style>


</head>

<body>
	<div class="page-wrapper default-theme  bg1 toggled">
		<span th:remove="tag" th:utext="${dataHtml}"></span>


		<!-- page-content  -->
		<main class="page-content" style="background: #112d4e;">
			<div id="overlay" class="overlay"></div>
			<div class="container-fluid" style="padding: 0px;">
				<div class="title-bar"
					style="height: 90px; background-image: url(../img/bn.jpeg) !important; background-repeat: no-repeat; width: 100%; height: 100%; background-size: cover;">
					<a id="toggle-sidebar" class="btn btn-secondary rounded-0" href="#"
						style="margin: 20px; background: #3ab54a;"> <span><svg
								xmlns="http://www.w3.org/2000/svg" width="16" height="16"
								fill="currentColor" class="bi bi-list" viewBox="0 0 16 16">
                                <path fill-rule="evenodd"
									d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z" />
                            </svg></span>
					</a>
				</div>
				<div class="container" style="margin-left:90px;">
					<h4 class="card-title" style="text-align: center; color: white;background-color: green;padding: 10px; Width: 88%">Data
						Availability Dash Board</h4>
				</div>
				
			</div>
			<div>
				<!-- print div starts  -->
				<div id='DivIdToPrint'>
					<!-- chart start -->


					<div class="col-lg-12 col-md-12 col-sm-12">

						<!--      chart start (R) -->
						<div class="row">

							<div class="col-md-1"></div>
							
					<br>
					<div class="row">
						<div class="col-md-1"></div>
						<div class="card-body" style="Width: 90%">
							<div class="card-header"  style="background:#abcdef;">
								<h4 class="card-title" style="text-align: center;">MOD Movement List</h4>
							</div>

							<div class="table-responsive" >
								<table class="table display table-bordered margin-top:10px">

									<thead class="text" style="font-size: 14px; color: black;">
										<tr style="background:#11c7e0">
											<!--  <th>Location Mod ID</th>-->
											<th>Bill Cycle Code</th>
											<th>Location Code</th>
											<th>Location Name</th>
											<th>From User</th>
											<th>From User Type</th>
											<th>To User</th>
											<th>To User Type</th>
											<th>Comments</th>
											<th>Received At</th>
											<th>Send At</th>
											<th>Stay Time(hour)</th>
										</tr>
									</thead>


									<tbody>

										<tr th:each="s: ${listIC_DASHBOARD_DATA_DETAILS}">
											
											<!--<td style="width:10%; background: #FFBE5B;" scope="row" th:text="${s.LOC_MOD_DF_ID}">
												
											</td>-->
											<td style="width:10%; background: #3ab54a;" scope="row" th:text="${s.BILL_CYCLE_CODE}">
												
											</td>
											<td style="width:10%;background:#FFBE5B;" scope="row" th:text="${s.lOCATION_CODE}">
												
											</td>
											<td style="width:8%;background:#FFBE5B;" scope="row" th:text="${s.lOCATION_NAME}">
												
											</td>
											<td style="width:10%; background: #94D441;" scope="row" th:text="${s.FROM_USER}">
												
											</td>
											<td style="width:10%; background: #94D441;" scope="row" th:text="${s.FROM_USER_TYPE}">
												
											</td>
											<td style="width:10%;background:#FFBE5B;" scope="row" th:text="${s.TO_USER}">
												
											</td>
											<td style="width:10%; background: #abcdef;" scope="row" th:text="${s.TO_USER_TYPE}">
												
											</td>
											<td style="width:20%; background: #FFB13B;" scope="row" th:text="${s.COMMENTS}">
												
											</td>
											<td style="width:10%; background:#00b300;" scope="row" th:text="${s.RECEIVED_AT}">
												
											</td>
											<td style="width:20%; background: #FFB13B;" scope="row" th:text="${s.SEND_AT}">
												
											</td>
											<td style="width:10%; background:#00b300;" scope="row" th:text="${s.STAY_TIME}">
												
											</td>


										</tr>

									</tbody>
								</table>
							</div>

						</div>
					</div>

				</div>
				<!-- 2nd chart end -->

			</div>
			<!-- dpd_EQ_MONTH tABLE end (R) -->





			<script th:inline="javascript">
						function mt_rand(min, max) {
							var argc = arguments.length
							if (argc === 0) {
								min = 0
								max = 2147483647
							} else if (argc === 1) {
								throw new Error(
										'Warning: mt_rand() expects exactly 2 parameters, 1 given')
							}
							return Math.floor(Math.random() * (max - min + 1))
									+ min
						}
						function random_color_part() {
							// return str_pad( dechex( mt_rand( 0, 255 ) ), 2, '0', 1);
							return mt_rand(0, 255);
						}

						function random_color() {
							return 'rgb(' + random_color_part() + ','
									+ random_color_part() + ','
									+ random_color_part() + ')';
						}
		
						//let $color = random_color();
						
                    //chart stART 

						var real_data = /*[[${chartData}]]*/'noValue';
					
						
						
			
						
			let x = [];			
						for ( var property in real_data ) {
   x.push(property) ; 
   
}

						
						
						
													
							
							
	
							
							
							
// 							console.log(x2);
// 							let i =0;

						
						
	
			

						$(document).ready(function() {
							google.charts.load('current', {
								packages : [ 'corechart', 'bar' ]
							});
 							google.charts.setOnLoadCallback(drawColumnChart);
							
 						
 							
						});

						function drawColumnChart() {
							var data = new google.visualization.DataTable();
							data.addColumn('string', 'Feeder');
							data.addColumn('number', 'MOD');
							data.addColumn({
								type : 'string',
								role : 'style'
							});
							data.addColumn({ type : 'number',role: 'annotation' });
							Object.keys(real_data).forEach(
									function(key) {
										data.addRow([ key, real_data[key],
												random_color(),real_data[key] ]);

									});
							var options = {
								title : '',
								legend: { position: 'top', maxLines: 3 },
								hAxis : {
									title : '',
									
								},
								vAxis : {
									title : 'MOD'
								},
								width: 350,
								height: 350,
							};
							var chart = new google.visualization.ColumnChart(
									document.getElementById('chart_div'));
							chart.draw(data, options);
							
							
							google.visualization.events.addListener(chart,
									'select', selectHandler);
							function selectHandler(e) {
								alert(data.getValue(
										chart.getSelection()[0].row, 0));
							}
						}
     
     
						
// 						dpd_BILLED_amt_UP chart start
						
						
						 
						//single graph bar end
					</script>




			<!-- chart end -->
	</div>
	<!-- print div ends -->
	</div>
	</div>
	</div>
	</main>
	<!-- page-content" -->
	</div>
	<!-- page-wrapper -->

	<!-- using online scripts -->
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"
		integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut"
		crossorigin="anonymous">
        </script>
	<script
		src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"
		integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k"
		crossorigin="anonymous">
        </script>
	<script
		src="//malihu.github.io/custom-scrollbar/jquery.mCustomScrollbar.concat.min.js"></script>

	<!-- using local scripts -->
	<!-- <script src="../node_modules/jquery/dist/jquery.min.js"></script>
    <script src="../node_modules/popper.js/dist/umd/popper.min.js"></script>
    <script src="../node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="../node_modules/malihu-custom-scrollbar-plugin/jquery.mCustomScrollbar.concat.min.js"></script> -->


	<script src="../js/main.js"></script>
	<!-- datatable script  -->
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>



	<!-- Optional JavaScript -->
	<!-- jQuery first, then Popper.js, then Bootstrap JS -->
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
		integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
		crossorigin="anonymous"></script>
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
		integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
		crossorigin="anonymous"></script>
	<script
		src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
		integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
		crossorigin="anonymous"></script>

	<script src="https://code.jquery.com/jquery-3.5.1.js"
		integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
		crossorigin="anonymous"></script>


	<!-- datatable script link  -->
	<script type="text/javascript" charset="utf8"
		src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.js"></script>
	<script
		src="https://nightly.datatables.net/buttons/js/dataTables.buttons.js?_=c6b24f8a56e04fcee6105a02f4027462"></script>


	<script
		src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.min.js"></script>
	<script
		src="https://cdn.datatables.net/buttons/1.7.0/js/dataTables.buttons.min.js"></script>
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
	<script
		src="https://cdn.datatables.net/buttons/1.7.0/js/buttons.html5.min.js"></script>
	<script
		src="https://cdn.datatables.net/buttons/1.7.0/js/buttons.print.min.js"></script>



	<script>
			$(document).ready(
					function() {
						$('#page-content-wrapper ,#sidebar-wrapper')
								.toggleClass('toggled');
					});

			$('#bar').click(
					function() {
						$(this).toggleClass('open');
						$('#page-content-wrapper ,#sidebar-wrapper')
								.toggleClass('toggled');

					});
		</script>



	<!-- 		circle dropdown starts  -->
	<script>
			$(document).ready(function(){
				$("#zone").change(function(){
					
					$("#circle").empty();
					
					
					
					var x = $("#zone").val();
					
					if(x == ""){
						$("#circle").empty();
						$("<option>").val("").text("Select Circle").appendTo(circleDropdown);
					}
					else{
					
						var urlString = "/api/circle/"+x;
						console.log(urlString);
						
						$.ajax({
							method: "GET",
							url : urlString
						})
						.done(function(responseJson){
							
							circleDropdown = $("#circle");
							
							$("<option>").val("").text("Select Circle").appendTo(circleDropdown);
							$.each(responseJson, function(index, circle){
								
								$("<option>").val(circle.circle_CODE).text(circle.circle_NAME).appendTo(circleDropdown);
							});
						})
						.fail(function(){
							alert("Connection Error");
						})
					}
					
					
				})
			})
		</script>
	<!-- 		circle dropdown ends  -->

	<!-- 			div dropdown starts -->
	<script>
			$(document).ready(function(){
				$("#circle").change(function(){
					
					$("#div").empty();
					
					
					
					var x = $("#circle").val();
// 					console.log(x);
					
					if(x == ""){
						$("#div").empty();
						$("<option>").val("").text("Select Div").appendTo(divDropdown);
					}
					else{
					
						
						
						var urlString = "/api/div/"+x;
						console.log(urlString);
						
						$.ajax({
							method: "GET",
							url : urlString
						})
						.done(function(responseJson){
							
							divDropdown = $("#div");
							
// 							alert(responseJson);
							
							$("<option>").val("").text("Select Div").appendTo(divDropdown);
							$.each(responseJson, function(index, div){
// 								div_CODE
								
								$("<option>").val(div.div_CODE).text(div.div_NAME).appendTo(divDropdown);
							});
						})
						.fail(function(){
							alert("Connection Error");
						})
					}
					
					
				})
			})
		</script>
	<!-- 				div dropdown ends  -->



	<!-- loc dropdown starts -->

	<script>
			$(document).ready(function(){
				$("#div").change(function(){
					
					$("#loc").empty();
					
					
					var y = $("#circle").val();
					
					console.log(y);
					var x = $("#div").val();
					console.log(x);
					
					if(x == ""){
						$("#loc").empty();
						$("<option>").val("").text("Select Loc").appendTo(circleDropdown);
					}
					else{
					
						var str1 = "_";
						var str2 = x.concat(str1);
						var res = str2.concat(y);
						
						console.log(res);
						
						
						
						var urlString = "/api/loc/"+x+"/"+y;
						console.log(urlString);
						
						$.ajax({
							method: "GET",
							url : urlString
						})
						.done(function(responseJson){
							
							locDropdown = $("#loc");
							
// 							alert(responseJson);
							
							$("<option>").val("").text("Select Loc").appendTo(locDropdown);
							$.each(responseJson, function(index, loc){
// 								div_CODE
								
								$("<option>").val(loc.location_CODE).text(loc.location_NAME).appendTo(locDropdown);
							});
						})
						.fail(function(){
// 							alert("Connection Error");
							alert(urlString);
						})
					}
					
					
				})
			})
		</script>

	<!-- loc dropdown ends -->

	<script>

$(document).ready(function() {

// 	var user = document.getElementById("user").innerText;


	var r = document.getElementById("report");
	var r_text = r.options[r.selectedIndex].text;


	var z = document.getElementById("zone");
	var z_text = z.options[z.selectedIndex].text;
	if(z_text === "Select Zone"){
		z_text = "  ";
	}


	var c = document.getElementById("circle");
	var c_text = c.options[c.selectedIndex].text;
	if(c_text === "Select Circle"){
		c_text = "  ";
	}


	var d = document.getElementById("div");
	var d_text = d.options[d.selectedIndex].text;
	if(d_text === "Select Div"){
		d_text = "  ";
	}


	var l = document.getElementById("loc");
	var l_text = l.options[l.selectedIndex].text;
	if(l_text === "Select Loc"){
		l_text = "  ";
	}


	var f = document.getElementById("bill");
	var f_text = f.options[f.selectedIndex].text;
	if(f_text === "Select Month"){
		f_text = "  ";
	}
	
	

	   

	    $('#table41').DataTable( {
	        dom: 'Bfrtip',
	        "searching":false,
	        "paging": true,
	        "bInfo" : true,
	        "pageLength": 5,
	        "scrollX": true,
	  
	        buttons: [{
	                        extend: "excel",
	                        className: 'btn btn-success'
	                    },
	                    {
	                        extend: 'print',
	                        text: 'Print',
	                        orientation: 'landscape',
							pageSize: 'A4',
	                        className: 'btn btn-primary',
	                        autoPrint: true,
	                        title: '',
	                        exportOptions: {
	                            columns: ':visible',
	                            stripHtml: false
	                        },
	                        messageTop: "<div class='float-right' style='font-size: 18px'>User :ITBL</div> <div class='text-center'> <img style='margin-left: 150px' src='./img/logo.jpg' alt='' height='80px' width='80px'> <h1 style='font-size:22px;'>Bangladesh Power Development Board</h1> </div>"+
// 	                        "<div style='text-align:center; font-size: 20px;'>SAIDI: System Average Interruption Duration Index</div>'"+
// 	                        "<div style='text-align:center; font-size: 20px;'>SAIFI: System Average Interruption Frequency Index</div>'"+
	                        "<div style='text-align:center; font-size: 20px;'>Generation Performance Report</div>'"+
	                        
	                        "<div style='text-align:center; margin-top: -30px; font-size: 20px;'>Report Level :" + r_text + "</div>"+
	                         "<div style='text-align:center; font-size: 20px;'>Zone :" + z_text +  "Circle : "+ c_text +" Div : "+ d_text +" Loc : " + l_text  + " Month : " + f_text + "</div>"
	                    }
	            
	            
	        ]
	        
	    } );
	    
	    
	    
	    

})
</script>



</body>
</html>